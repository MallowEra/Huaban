<HB:HBControl
    x:Class="Huaban.UWP.Views.ImageView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Huaban.UWP.Views"
	xmlns:HB="using:Huaban.UWP.Controls"
	xmlns:Interactivity="using:Microsoft.Xaml.Interactivity" 
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:controls="using:ImageLib.Controls"
    mc:Ignorable="d">
	<Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" 
		BorderThickness="0.9 0" BorderBrush="{StaticResource SystemAccentColorBrush}" Margin="-1 0">
		<Grid Background="{ThemeResource SystemControlBackgroundBaseLowBrush}">
			<HB:IncrementalLoadingFlipView DataContext="{Binding PinListViewModel}"
				ItemsSource="{Binding PinList}" 
				SelectedItem="{Binding SelectedItem,Mode=TwoWay}">
				<FlipView.ItemTemplate>
					<DataTemplate>
						<ScrollViewer ZoomMode="Enabled" VerticalScrollMode="Disabled" VerticalScrollBarVisibility="Disabled">
							<controls:ImageView UriSource="{Binding file.Orignal}" Stretch="Uniform">
								<Interactivity:Interaction.Behaviors>
									<Core:EventTriggerBehavior EventName="LoadingCompleted">
										<Core:InvokeCommandAction Command="{Binding LoadedCommand}"></Core:InvokeCommandAction>
									</Core:EventTriggerBehavior>
									<Core:EventTriggerBehavior EventName="LoadingFailed">
										<Core:InvokeCommandAction Command="{Binding LoadedCommand}"></Core:InvokeCommandAction>
									</Core:EventTriggerBehavior>
								</Interactivity:Interaction.Behaviors>
							</controls:ImageView>
						</ScrollViewer>
					</DataTemplate>
				</FlipView.ItemTemplate>
			</HB:IncrementalLoadingFlipView>
		</Grid>
	</Grid>
</HB:HBControl>
